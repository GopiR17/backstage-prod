ruleset:
  - breaking-changes
capture:
  plugins/search-backend/src/schema/openapi.yaml:
    # 🔧 Runnable example with simple get requests.
    # Run with "optic capture plugins/search-backend/src/schema/openapi.yaml --update interactive"
    # You can change the server and the 'requests' section to experiment
    server:
      url: http://localhost:3000
    requests:
      # ℹ️ Requests should be sent to the Optic proxy, the address of which is injected into 'run.command's env as OPTIC_PROXY (or the value of 'run.proxy_variable').
      run:
        # 🔧 Specify a command that will generate traffic
        command: cd plugins/search-backend && yarn backstage-cli package test
  plugins/catalog-backend/src/schema/openapi.yaml:
    server:
      url: http://localhost:3000
    requests:
      run:
        command: cd plugins/catalog-backend && yarn backstage-cli package test
