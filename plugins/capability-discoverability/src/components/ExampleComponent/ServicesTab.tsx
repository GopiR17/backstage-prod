/*
 * Copyright 2021 Spotify AB
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import {
  Card,
  Box,
  Typography,
  IconButton,
  Collapse,
  CardContent,
  Grid,
  Divider,
  Tooltip,
} from '@material-ui/core';
import { grey } from '@material-ui/core/colors';
import React from 'react';
import LayersIcon from '@material-ui/icons/Layers';
import CloudIcon from '@material-ui/icons/CloudOutlined';
import KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';
import KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';

function Ing(props: any) {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width={24}
      height={24}
      viewBox="0 0 18.035 17.5"
      id="prefix__svg13826"
      {...props}
    >
      <script />
      <g
        id="prefix__layer1"
        transform="translate(-.993 -1.174)"
        fillOpacity={1}
        stroke="none"
      >
        <g
          id="prefix__g70"
          transform="matrix(1.01489 0 0 1.01489 16.902 -2.699)"
          strokeWidth={0}
          strokeMiterlimit={4}
          strokeDasharray="none"
        >
          <path
            id="prefix__path3055"
            d="M-6.85 4.272a1.12 1.11 0 00-.428.109l-5.852 2.796a1.12 1.11 0 00-.606.753l-1.444 6.282a1.12 1.11 0 00.152.85 1.12 1.11 0 00.064.089l4.05 5.037a1.12 1.11 0 00.876.417l6.496-.001a1.12 1.11 0 00.875-.417l4.049-5.038a1.12 1.11 0 00.216-.939L.152 7.93a1.12 1.11 0 00-.605-.753L-6.307 4.38a1.12 1.11 0 00-.542-.109z"
            fill="#326ce5"
            strokeOpacity={1}
          />
          <path
            id="prefix__path3054-2-9"
            d="M-6.852 3.818a1.181 1.172 0 00-.452.115l-6.18 2.951a1.181 1.172 0 00-.638.795l-1.524 6.63a1.181 1.172 0 00.16.9 1.181 1.172 0 00.067.093l4.276 5.317a1.181 1.172 0 00.924.44h6.858a1.181 1.172 0 00.923-.44L1.837 15.3a1.181 1.172 0 00.228-.99L.54 7.677a1.181 1.172 0 00-.64-.795l-6.178-2.95a1.181 1.172 0 00-.573-.115zm.003.455a1.12 1.11 0 01.542.108l5.853 2.795a1.12 1.11 0 01.606.753l1.446 6.281a1.12 1.11 0 01-.216.94l-4.05 5.037a1.12 1.11 0 01-.875.417l-6.496.001a1.12 1.11 0 01-.875-.417l-4.05-5.037a1.12 1.11 0 01-.064-.088 1.12 1.11 0 01-.152-.851l1.444-6.281a1.12 1.11 0 01.605-.753l5.853-2.797a1.12 1.11 0 01.429-.108z"
            style={{
              lineHeight: 'normal',

              textIndent: 0,
              textAlign: 'start',
              textDecorationLine: 'none',
              textTransform: 'none',
              marker: 'none',
            }}
            color="#000"
            fontStyle="normal"
            fontVariant="normal"
            fontWeight={400}
            fontStretch="normal"
            fontSize="medium"
            fontFamily="Sans"
            textDecoration="none"
            letterSpacing="normal"
            wordSpacing="normal"
            writingMode="lr-tb"
            direction="ltr"
            baselineShift="baseline"
            textAnchor="start"
            display="inline"
            overflow="visible"
            visibility="visible"
            fill="#fff"
            fillRule="nonzero"
          />
        </g>
        <text
          id="prefix__text2066"
          y={16.812}
          x={10.009}
          style={{
            lineHeight: '6.61458349px',
          }}
          xmlSpace="preserve"
          fontStyle="normal"
          fontWeight={400}
          fontSize={10.583}
          fontFamily="Sans"
          letterSpacing={0}
          wordSpacing={0}
          fill="#fff"
          strokeWidth={0.265}
          strokeLinecap="butt"
          strokeLinejoin="miter"
          strokeOpacity={1}
        >
          <tspan
            style={{
              textAlign: 'center',
            }}
            y={16.812}
            x={10.009}
            id="prefix__tspan2064"
            fontStyle="normal"
            fontVariant="normal"
            fontWeight={400}
            fontStretch="normal"
            fontSize={2.822}
            fontFamily="Arial"
            writingMode="lr-tb"
            textAnchor="middle"
            fill="#fff"
            fillOpacity={1}
            strokeWidth={0.265}
          >
            ing
          </tspan>
        </text>
        <path
          id="prefix__path7709"
          pointerEvents="none"
          d="M12.758 13.716h-2.27L5.565 7.56H4.143V5.545h2.314l4.923 6.156h1.378v-1.593l3.12 2.6-3.12 2.602zm-2.476-4.755l1.098-1.375h1.378v1.593l3.12-2.6-3.12-2.602v1.594h-2.27L9.03 7.395zm-3.598 1.365l-1.118 1.4H4.143v2.015h2.314l1.479-1.849z"
          fill="#fff"
          strokeWidth={0.21}
        />
      </g>
    </svg>
  );
}

function AsyncApiIcon(props: any) {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 126 126"
      className="prefix__h-8 prefix__w-auto prefix__ml-4 prefix__mt-0_5"
      width={24}
      height={24}
      {...props}
    >
      <path
        fill="#4775B9"
        d="M46.5 121.416c-23.583 0-42.768-14.301-42.768-31.879h8.469c0 12.908 15.387 23.408 34.299 23.408s34.299-10.5 34.299-23.408h8.469c.001 17.578-19.183 31.879-42.768 31.879zm42.769-87.538H80.8c0-12.906-15.387-23.407-34.299-23.407s-34.299 10.5-34.299 23.407h-8.47C3.732 16.3 22.918 2 46.5 2c23.585 0 42.769 14.3 42.769 31.878z"
      />
      <path
        fill="#63BA90"
        d="M14.368 42.338l44.059 31.91-4.968 6.858L9.4 49.196zM39.878 42.29L83.937 74.2l-4.967 6.857L34.91 49.148z"
      />
    </svg>
  );
}

function SvgComponent(props: any) {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width={24}
      height={24}
      viewBox="0 0 256 256"
      preserveAspectRatio="xMidYMid"
      {...props}
    >
      <path
        d="M127.06 255.997C58.85 255.527-.457 198.918.003 126.998.445 57.796 57.952-.469 129.11.003c69.157.46 127.503 57.864 126.885 128.191.573 69.69-58.06 128.295-128.935 127.803zm0 0C58.85 255.527-.457 198.918.003 126.998.445 57.796 57.952-.469 129.11.003c69.157.46 127.503 57.864 126.885 128.191.573 69.69-58.06 128.295-128.935 127.803z"
        fill="#FFF"
      />
      <path
        d="M127.185 238.997C68.032 238.59 16.604 189.5 17.002 127.131c.384-60.012 50.253-110.54 111.961-110.129 59.972.399 110.569 50.18 110.033 111.167.496 60.433-50.349 111.255-111.811 110.828zm0 0C68.032 238.59 16.604 189.5 17.002 127.131c.384-60.012 50.253-110.54 111.961-110.129 59.972.399 110.569 50.18 110.033 111.167.496 60.433-50.349 111.255-111.811 110.828z"
        fill="#49A32B"
      />
      <path
        d="M169.327 127.956c-.284 5.29-4.906 9.683-9.46 8.917h-.069a9.133 9.133 0 01-9.145-9.124 9.276 9.276 0 019.427-8.96c5.045.025 9.52 4.288 9.247 9.167zM88.201 179.22c1.902.056 3.806.015 6 .015v13.786c-13.635 2.305-24.866-1.566-27.622-13.091a76.501 76.501 0 01-1.736-12.886c-.293-4.592.213-9.235-.137-13.819-.97-12.612-2.603-16.918-14.706-17.514v-15.696a22.665 22.665 0 012.632-.452c6.636-.327 9.433-2.362 10.917-8.898a74.57 74.57 0 001.194-11.122c.526-7.217.34-14.551 1.542-21.651 1.737-10.267 8.111-15.255 18.64-15.814 2.996-.16 6.001-.024 9.396-.024v14.09c-1.397.1-2.677.303-3.95.265-8.58-.263-9.023 2.66-9.65 9.762-.39 4.454.149 8.984-.155 13.454a107.113 107.113 0 01-1.781 13.245c-1.238 6.339-5.135 11.053-10.535 15.053 10.483 6.823 11.676 17.423 12.357 28.188.366 5.784.199 11.61.786 17.366.457 4.467 2.195 5.607 6.808 5.743zm8.836-60.43h.162a9.078 9.078 0 018.928 9.226 8.884 8.884 0 01-9.396 8.851 9.046 9.046 0 11.306-18.078zm31.236 0c5.483-.043 9.124 3.51 9.152 8.93.03 5.565-3.422 9.125-8.868 9.149-5.54.024-9.186-3.48-9.216-8.867a8.671 8.671 0 018.933-9.213zm65.4-6.867c1.459 5.447 4.298 7.362 10.032 7.623.94.044 1.875.203 3.163.346v15.692c-.697.23-1.412.4-2.138.512-7.684.478-11.186 3.63-11.962 11.335-.496 4.919-.455 9.892-.796 14.828a125.806 125.806 0 01-1.476 16.18c-1.96 9.703-8.019 14.544-18.029 15.135-3.221.19-6.466.03-9.94.03v-14.026c1.87-.115 3.52-.275 5.174-.314 5.981-.143 8.096-2.071 8.389-8.011.324-6.525.465-13.059.757-19.586.423-9.433 3.006-17.861 11.795-23.745-5.03-3.585-9.067-7.928-10.112-13.783-1.265-7.097-1.674-14.351-2.355-21.548-.336-3.597-.32-7.226-.671-10.821-.379-3.88-3.045-5.224-6.577-5.31-2.024-.05-4.055-.01-6.642-.01V62.754c16.509-2.741 27.913 2.752 28.973 18.548.443 6.632.378 13.297.803 19.93.186 3.608.726 7.19 1.612 10.691z"
        fill="#FFF"
      />
    </svg>
  );
}

export const ServicesCard = ({ services }: any) => {
  const [open, setOpen] = React.useState(false);
  return (
    <Card>
      <Box m={1} display="flex" alignItems="center">
        <LayersIcon
          style={{ marginRight: 5, color: grey[800] }}
          fontSize="small"
        />
        <div style={{ color: grey[800] }}>Services</div>
        <Box flex={1} />
        <Typography style={{ marginRight: 5 }}>{services.length}</Typography>
        <CloudIcon style={{ marginRight: 5 }} fontSize="small" />
        {services.length !== 0 && (
          <IconButton size="small" onClick={() => setOpen(p => !p)}>
            {open ? (
              <KeyboardArrowUpIcon fontSize="small" />
            ) : (
              <KeyboardArrowDownIcon fontSize="small" />
            )}
          </IconButton>
        )}
      </Box>
      {open && services.length !== 0 && <Divider />}
      {services.length !== 0 && (
        <Collapse in={open} timeout="auto" unmountOnExit>
          <Box m={1}>
            <Grid container spacing={1}>
              {services.map((_: any, index: number) => (
                <Grid item xs={12} lg={4}>
                  <Card>
                    <CardContent>
                      <Box
                        display="flex"
                        flexDirection="column"
                        alignItems="center"
                      >
                        <Box>
                          <Typography variant="h6">
                            Service {index + 1}
                          </Typography>
                        </Box>
                        <Divider
                          flexItem
                          style={{ height: 1, marginTop: 8, marginBottom: 24 }}
                        />
                        <Box
                          display="flex"
                          justifyContent="space-around"
                          style={{ width: '100%' }}
                        >
                          <Box>
                            <Tooltip title="open swagger docs">
                              <IconButton size="small">
                                <SvgComponent />
                              </IconButton>
                            </Tooltip>
                          </Box>
                          <Box>
                            <Tooltip title="open AsyncApi docs">
                              <IconButton size="small">
                                <AsyncApiIcon />
                              </IconButton>
                            </Tooltip>
                          </Box>
                          <Box>
                            <Tooltip title="open k8s Ingress docs">
                              <IconButton size="small">
                                <Ing />
                              </IconButton>
                            </Tooltip>
                          </Box>
                        </Box>
                      </Box>
                    </CardContent>
                  </Card>
                </Grid>
              ))}
            </Grid>
          </Box>
        </Collapse>
      )}
    </Card>
  );
};
